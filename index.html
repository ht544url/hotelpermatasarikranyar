<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PERMATA SARI - ROOM 132 MASTER SYSTEM</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Orbitron:wght@400;500;700;900&family=Montserrat:wght@100;300;400;600;800&family=Playfair+Display:ital,wght@0,700;1,700&display=swap" rel="stylesheet">

<style>
    /* ================================================================
       SYSTEM STYLE: PERMATA SARI v9.0 (RECOVERY COMPLETE)
       OPTIMIZATION: TV 32" SAFE-AREA & PREMIUM SYMBOLS
       ================================================================
    */

    :root {
        --gold-primary: #D4AF37;
        --gold-bright: #FFD700;
        --gold-dark: #8B6508;
        --neon: 0 0 20px rgba(212, 175, 55, 0.6), 0 0 40px rgba(212, 175, 55, 0.3);
        --bg-black: #020202;
        --surface-1: rgba(255, 255, 255, 0.05);
        --surface-2: rgba(255, 255, 255, 0.1);
        --surface-3: rgba(255, 255, 255, 0.15);
        --red-danger: #c0392b;
        --transition-ultra: all 1.2s cubic-bezier(0.19, 1, 0.22, 1);
        --transition-long: all 0.8s cubic-bezier(0.19, 1, 0.22, 1);
        --transition-mid: all 0.4s ease;
    }

    * {
        margin: 0; padding: 0; box-sizing: border-box;
        outline: none; -webkit-tap-highlight-color: transparent;
    }

    body {
        background-color: var(--bg-black);
        color: #FFFFFF;
        font-family: 'Montserrat', sans-serif;
        height: 100vh; width: 100vw;
        overflow: hidden; 
        cursor: none;
        perspective: 2000px;
        /* PENCEGAHAN LAYAR KEPOTONG PADA TV 32 INCI */
        zoom: 0.9; 
    }

    /* --- BACKGROUND PARTICLE --- */
    #particle-canvas {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
    }

    /* --- HEADER SYSTEM --- */
    header {
        height: 18vh; padding: 0 60px; display: flex; justify-content: space-between;
        align-items: center; background: linear-gradient(180deg, rgba(0,0,0,0.85) 0%, transparent 100%);
        border-bottom: 1px solid rgba(212,175,55,0.25); position: relative; z-index: 1000;
    }

    .brand-logo h1 {
        font-family: 'Cinzel', serif; font-size: 3.5rem; color: var(--gold-primary);
        text-shadow: var(--neon); letter-spacing: 12px; text-transform: uppercase;
    }
    .brand-logo span { font-size: 0.8rem; letter-spacing: 6px; color: #888; margin-top: -10px; display: block; font-weight: 300; }

    .header-widgets { display: flex; align-items: center; gap: 35px; }
    .widget-item { text-align: right; border-left: 1px solid rgba(255,255,255,0.15); padding-left: 25px; }
    .time-display { font-family: 'Orbitron'; font-size: 3rem; font-weight: 900; color: #fff; }
    .date-display { font-size: 0.9rem; color: var(--gold-primary); text-transform: uppercase; font-weight: 700; }

    /* --- MAIN ARCHITECTURE --- */
    main {
        display: grid; grid-template-columns: 420px 1fr; height: 82vh;
        padding: 30px 60px; gap: 50px;
    }

    /* --- NAVIGATION (3D PERSPECTIVE) --- */
    .sidebar-nav { display: flex; flex-direction: column; gap: 15px; position: relative; z-index: 500; }

    .nav-link {
        background: var(--surface-1); border: 1px solid rgba(255,255,255,0.08);
        padding: 32px 25px; border-radius: 20px; display: flex; align-items: center;
        gap: 25px; transition: var(--transition-long); outline: none;
        position: relative; transform-style: preserve-3d; text-decoration: none;
    }

    /* PREMIUM ICON STYLING */
    .nav-link i {
        font-style: normal;
        font-size: 2.2rem;
        transition: var(--transition-mid);
        color: var(--gold-primary);
        width: 50px;
        text-align: center;
        display: inline-block;
    }

    /* ICON CHARACTER ASSIGNMENT */
    .icon-home::before { content: "‚åÇ"; }
    .icon-mosque::before { content: "üïå"; }
    .icon-coffee::before { content: "‚òï"; }
    .icon-briefcase::before { content: "üíº"; }
    .icon-map::before { content: "üìç"; }
    .icon-refresh::before { content: "‚ü≤"; }

    .nav-link .nav-text { display: flex; flex-direction: column; }
    .nav-link .main-label { font-size: 1.5rem; font-weight: 800; color: rgba(255,255,255,0.5); }
    .nav-link .sub-label { font-size: 0.75rem; color: var(--gold-primary); opacity: 0; transform: translateY(10px); transition: 0.4s; }

    .nav-link:focus, .nav-link.active {
        background: linear-gradient(90deg, rgba(212,175,55,0.15), rgba(212,175,55,0.05));
        border-color: var(--gold-primary); box-shadow: var(--neon);
        transform: rotateY(15deg) translateX(25px) scale(1.05);
    }

    .nav-link:focus .main-label { color: #fff; text-shadow: 0 0 10px #fff; }
    .nav-link:focus .sub-label { opacity: 1; transform: translateY(0); }
    .nav-link:focus i { transform: translateZ(50px) scale(1.2); }

    /* --- CONTENT ENGINE --- */
    .content-frame {
        background: rgba(10, 10, 10, 0.9); border-radius: 50px;
        border: 1px solid rgba(255,255,255,0.12); padding: 50px;
        position: relative; backdrop-filter: blur(40px);
        box-shadow: 0 50px 100px rgba(0,0,0,0.8); overflow: hidden;
    }

    .section-view {
        display: none; height: 100%; width: 100%;
        animation: sectionIn 1s var(--transition-long) forwards;
    }

    @keyframes sectionIn {
        from { opacity: 0; transform: scale(0.9) translateZ(-500px); filter: blur(20px); }
        to { opacity: 1; transform: scale(1) translateZ(0); filter: blur(0); }
    }

    .section-view.active { display: block; }

    /* --- HOME COMPONENTS --- */
    .home-grid { display: grid; grid-template-rows: 350px 1fr; gap: 35px; }
    .image-slider {
        width: 100%; height: 100%; border-radius: 35px; overflow: hidden;
        position: relative; border: 2px solid var(--gold-primary);
    }
    .slide-item {
        position: absolute; inset: 0; background-size: cover; background-position: center;
        opacity: 0; transition: opacity 2s ease-in-out; transform: scale(1.1);
    }
    .slide-item.active { opacity: 1; transform: scale(1); }
    .slide-overlay { position: absolute; inset: 0; background: linear-gradient(0deg, rgba(0,0,0,0.9) 0%, transparent 60%); }

    /* --- PRAYER ENGINE --- */
    .prayer-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 15px; margin-top: 30px; }
    .prayer-card {
        background: var(--surface-1); padding: 35px 15px; border-radius: 25px;
        text-align: center; border: 1px solid rgba(212,175,55,0.15); transition: 0.5s;
    }
    .prayer-card.active-now { border-color: var(--gold-primary); box-shadow: var(--neon); transform: translateY(-10px); }
    .prayer-name { font-size: 1.1rem; font-weight: 800; color: var(--gold-primary); margin-bottom: 15px; }
    .prayer-time { font-family: 'Orbitron'; font-size: 2rem; font-weight: 900; }

    /* --- FOOD & INFO LIST --- */
    .menu-category h3 { font-family: 'Cinzel'; color: var(--gold-primary); margin-bottom: 25px; border-bottom: 1px solid var(--gold-dark); display: inline-block; }
    .food-item {
        background: var(--surface-1); padding: 25px; border-radius: 20px;
        display: flex; justify-content: space-between; align-items: center;
        margin-bottom: 15px; border-left: 5px solid transparent; transition: 0.3s;
    }
    .food-item:focus { background: var(--surface-2); border-left-color: var(--gold-primary); transform: translateX(10px); }
    .food-price { font-family: 'Orbitron'; color: var(--gold-primary); font-size: 1.4rem; font-weight: 800; }

    /* --- ADZAN POPUP --- */
    .adzan-alarm {
        position: fixed; inset: 0; background: rgba(0,0,0,0.99); z-index: 100000;
        display: none; flex-direction: column; justify-content: center; align-items: center;
    }
    .adzan-ring {
        width: 250px; height: 250px; border: 10px solid var(--gold-primary);
        border-radius: 50%; display: flex; justify-content: center; align-items: center;
        margin-bottom: 50px; animation: pulseGlow 2s infinite;
    }

    /* --- FLOATING CONTROL PANEL (Pojok Kanan Bawah) --- */
.control-panel {
    position: fixed;
    bottom: 30px;
    right: 30px;
    background: rgba(0, 0, 0, 0.8);
    border: 2px solid var(--gold);
    padding: 15px;
    border-radius: 20px;
    display: grid;
    grid-template-areas: 
        ". up ."
        "left ok right"
        ". down ."
        "fs fs fs";
    gap: 10px;
    z-index: 9999;
    box-shadow: var(--neon);
}

.control-btn {
    width: 60px;
    height: 60px;
    background: var(--surface);
    border: 1px solid var(--gold);
    color: var(--gold);
    border-radius: 10px;
    font-weight: bold;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    font-size: 1.2rem;
}

.control-btn:active { background: var(--gold); color: #000; }

.btn-up { grid-area: up; }
.btn-left { grid-area: left; }
.btn-ok { grid-area: ok; background: var(--gold); color: #000; }
.btn-right { grid-area: right; }
.btn-down { grid-area: down; }
.btn-fs { 
    grid-area: fs; 
    width: 100%; 
    margin-top: 5px; 
    font-size: 0.8rem; 
    height: 40px; 
}
    
    @keyframes pulseGlow { 
        0% { box-shadow: 0 0 0 0 rgba(212,175,55,0.7); } 
        70% { box-shadow: 0 0 0 60px rgba(212,175,55,0); } 
        100% { box-shadow: 0 0 0 0 rgba(212,175,55,0); } 
    }

    /* --- SCROLLBAR --- */
    ::-webkit-scrollbar { width: 8px; }
    ::-webkit-scrollbar-thumb { background: var(--gold-primary); border-radius: 10px; }

        </style>
</head>
<body onclick="enableAudioEngine()">

    <canvas id="particle-canvas"></canvas>
    <audio id="sfx-alarm" src="https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3"></audio>

    <div class="adzan-alarm" id="adzan-layer">
        <div class="adzan-ring"><i style="font-size: 12rem;">üïå</i></div>
        <div class="adzan-text">
            <h1 id="prayer-target">MAGHRIB</h1>
            <h2>WAKTUNYA SHOLAT</h2>
            <p style="font-size: 1.8rem; margin-top: 40px; color: #888; font-weight: 300;">KARANGANYAR & SEKITARNYA</p>
        </div>
        <button onclick="dismissAdzan()" style="margin-top: 80px; padding: 30px 100px; font-family: 'Orbitron'; background: var(--gold-primary); border: none; font-size: 2rem; font-weight: 900; border-radius: 60px; cursor: pointer; box-shadow: var(--neon);">CLOSE</button>
    </div>

    <header>
        <div class="brand-logo">
            <h1>Permata Sari</h1>
            <span>CONVENTION HALL & HOTEL</span>
        </div>
        <div class="header-widgets">
            <div class="widget-item">
                <div id="w-temp" style="font-family: 'Orbitron'; font-size: 2.2rem; color: var(--gold-primary);">26¬∞C</div>
                <div style="font-size: 0.9rem; letter-spacing: 3px; opacity: 0.7;">KARANGANYAR</div>
            </div>
            <div class="widget-item">
                <div class="time-display" id="clock-main">00:00:00</div>
                <div class="date-display" id="date-main">MEMUAT...</div>
            </div>
            <div class="widget-item" style="border: none;">
                <div style="background: linear-gradient(135deg, var(--gold-primary), var(--gold-dark)); color: #000; padding: 15px 40px; border-radius: 15px; text-align: center; box-shadow: var(--neon);">
                    <span style="font-size: 0.8rem; font-weight: 900; display: block; letter-spacing: 2px;">ROOM</span>
                    <span style="font-family: 'Orbitron'; font-size: 3rem; font-weight: 900;">132</span>
                </div>
            </div>
        </div>
    </header>

    <main>
        <aside class="sidebar-nav">
    <a class="nav-link active" tabindex="0" onfocus="navigateTo('home')">
        <i class="icon-home"></i>
        <div class="nav-text"><span class="main-label">BERANDA</span><span class="sub-label">Luxury Experience</span></div>
    </a>
    <a class="nav-link" tabindex="0" onfocus="navigateTo('sholat')">
        <i class="icon-mosque"></i>
        <div class="nav-text"><span class="main-label">SHOLAT</span><span class="sub-label">Jadwal Karanganyar</span></div>
    </a>
    <a class="nav-link" tabindex="0" onfocus="navigateTo('dining')">
        <i class="icon-coffee"></i>
        <div class="nav-text"><span class="main-label">RESTO</span><span class="sub-label">Menu Room Service</span></div>
    </a>
    <a class="nav-link" tabindex="0" onfocus="navigateTo('facilities')">
        <i class="icon-briefcase"></i>
        <div class="nav-text"><span class="main-label">FASILITAS</span><span class="sub-label">Layanan Hotel</span></div>
    </a>
    <a class="nav-link" tabindex="0" onfocus="navigateTo('tourism')">
        <i class="icon-map"></i>
        <div class="nav-text"><span class="main-label">WISATA</span><span class="sub-label">Jelajah Kota</span></div>
    </a>
    <a class="nav-link" style="margin-top: auto; border-color: var(--red-danger);" onclick="window.location.reload()">
        <i class="icon-refresh" style="color: var(--red-danger);"></i>
        <div class="nav-text"><span class="main-label" style="color: var(--red-danger);">RELOAD</span><span class="sub-label" style="color: var(--red-danger);">Reset System</span></div>
    </a>
        </aside>
        
        <section class="content-frame">
            
            <div id="sec-home" class="section-view active">
                <div class="home-grid">
                    <div class="image-slider">
                        <div class="slide-item active" style="background-image: url('https://images.unsplash.com/photo-1566073771259-6a8506099945?auto=format&fit=crop&w=1600');"></div>
                        <div class="slide-item" style="background-image: url('https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?auto=format&fit=crop&w=1600');"></div>
                        <div class="slide-item" style="background-image: url('https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?auto=format&fit=crop&w=1600');"></div>
                        <div class="slide-overlay"></div>
                    </div>
                    <div class="welcome-text">
                        <h2>Perfect Stay</h2>
                        <p>Selamat datang di Kamar 132. Permata Sari Hotel & Convention menghadirkan kemewahan di jantung Karanganyar. Nikmati seluruh fasilitas kami melalui kendali Smart TV ini.</p>
                        <div style="margin-top: 40px; display: flex; gap: 30px;">
                            <div style="flex:1; background: var(--surface-1); padding: 35px; border-radius: 25px; border-bottom: 6px solid var(--gold-primary);">
                                <small style="color: var(--gold-primary); font-weight: 800; letter-spacing: 2px;">WIFI ACCESS</small>
                                <h3 style="font-family: 'Orbitron'; font-size: 1.8rem; margin-top: 10px;">PERMATA_132_GOLD</h3>
                            </div>
                            <div style="flex:1; background: var(--surface-1); padding: 35px; border-radius: 25px; border-bottom: 6px solid var(--gold-primary);">
                                <small style="color: var(--gold-primary); font-weight: 800; letter-spacing: 2px;">ROOM STATUS</small>
                                <h3 style="font-family: 'Orbitron'; font-size: 1.8rem; margin-top: 10px;">PREMIUM CLEAN</h3>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="sec-sholat" class="section-view">
                <h2 style="font-family: 'Cinzel'; font-size: 4rem; color: var(--gold-primary); margin-bottom: 10px;">Jadwal Sholat</h2>
                <p style="font-size: 1.4rem; color: #888; margin-bottom: 60px;">Wilayah Karanganyar & Sekitarnya (Auto-Update)</p>
                <div class="prayer-container">
                    <div class="prayer-grid" id="prayer-render-engine">
                        </div>
                    <div style="margin-top: 60px; padding: 45px; background: rgba(212,175,55,0.05); border-radius: 40px; border: 2px dashed var(--gold-primary); display: flex; gap: 40px; align-items: center;">
                        <span style="font-size: 5rem;">üîî</span>
                        <div>
                            <h3 style="font-size: 2.2rem; color: var(--gold-primary);">Sistem Pengingat Aktif</h3>
                            <p style="font-size: 1.3rem; opacity: 0.7; margin-top: 10px; line-height: 1.5;">Layar TV akan otomatis beralih ke mode Adzan saat waktu sholat tiba. Pastikan suara TV dalam keadaan menyala.</p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="sec-dining" class="section-view">
                <h2 style="font-family: 'Cinzel'; font-size: 4rem; color: var(--gold-primary); margin-bottom: 40px;">Permata Resto</h2>
                <div class="dining-layout">
                    <div class="menu-category">
                        <h3>MAIN COURSE</h3>
                        <div class="food-item" tabindex="0">
                            <div class="food-details"><h4>Nasi Goreng Permata</h4><p>Wagyu Beef, Fried Egg, Shrimp Crackers</p></div>
                            <div class="food-price">45K</div>
                        </div>
                        <div class="food-item" tabindex="0">
                            <div class="food-details"><h4>Soto Karanganyar</h4><p>Traditional Beef Soup with Local Herbs</p></div>
                            <div class="food-price">35K</div>
                        </div>
                        <div class="food-item" tabindex="0">
                            <div class="food-details"><h4>Iga Bakar Madu</h4><p>Premium Ribs with Forest Honey Glaze</p></div>
                            <div class="food-price">85K</div>
                        </div>
                    </div>
                    <div class="menu-category">
                        <h3>BEVERAGES</h3>
                        <div class="food-item" tabindex="0">
                            <div class="food-details"><h4>Wedang Uwuh</h4><p>Javanese Royal Herbal Drink</p></div>
                            <div class="food-price">20K</div>
                        </div>
                        <div class="food-item" tabindex="0">
                            <div class="food-details"><h4>Es Teller Permata</h4><p>Fresh Avocado, Jackfruit, Coconut</p></div>
                            <div class="food-price">30K</div>
                        </div>
                    </div>
                </div>
            </div>

           <div id="sec-facilities" class="section-view">
                <h2 style="font-family: 'Cinzel'; font-size: 4rem; color: var(--gold-primary); margin-bottom: 40px;">Info & Fasilitas</h2>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 40px;">
                    <div style="background: var(--surface-1); padding: 50px; border-radius: 40px; border-top: 10px solid var(--gold-primary);">
                        <h3 style="color: var(--gold-primary); font-size: 2rem; margin-bottom: 20px;">CONVENTION HALL</h3>
                        <p style="font-size: 1.4rem; line-height: 1.8; color: #ccc;">Gedung pertemuan termegah dengan kapasitas hingga 1.500 tamu. Ideal untuk resepsi pernikahan dan konferensi besar.</p>
                    </div>
                    <div style="background: var(--surface-1); padding: 50px; border-radius: 40px; border-top: 10px solid var(--gold-primary);">
                        <h3 style="color: var(--gold-primary); font-size: 2rem; margin-bottom: 20px;">LOBBY LOUNGE</h3>
                        <p style="font-size: 1.4rem; line-height: 1.8; color: #ccc;">Nikmati suasana santai di lobby lounge kami yang menyediakan aneka kopi nusantara dan kudapan ringan.</p>
                    </div>
                    <div style="grid-column: span 2; background: rgba(192, 57, 43, 0.15); padding: 45px; border-radius: 40px; border-left: 15px solid var(--red-danger);">
                        <h3 style="color: #e74c3c; font-size: 1.8rem; margin-bottom: 10px;">CATATAN PENTING</h3>
                        <p style="font-size: 1.4rem; color: #fff;">Kami menginformasikan bahwa Permata Sari Hotel & Convention tidak menyediakan fasilitas kolam renang.</p>
                    </div>
                </div>
            </div>

            <div id="sec-tourism" class="section-view">
                <h2 style="font-family: 'Cinzel'; font-size: 4rem; color: var(--gold-primary); margin-bottom: 40px;">Eksplorasi Karanganyar</h2>
                <div class="dining-layout">
                    <div style="background: url('https://images.unsplash.com/photo-1596402184320-417e7178b2cd?auto=format&fit=crop&w=800') center; background-size: cover; border-radius: 40px; border: 2px solid var(--gold-primary);"></div>
                    <div style="display: flex; flex-direction: column; gap: 20px;">
                        <div style="background: var(--surface-1); padding: 30px; border-radius: 25px;">
                            <h4 style="color: var(--gold-primary); font-size: 1.5rem;">Grojogan Sewu Tawangmangu</h4>
                            <p style="margin-top: 10px; color: #aaa;">Air terjun paling ikonik di lereng Gunung Lawu. Jarak tempuh: 35 Menit.</p>
                        </div>
                        <div style="background: var(--surface-1); padding: 30px; border-radius: 25px;">
                            <h4 style="color: var(--gold-primary); font-size: 1.5rem;">Kebun Teh Kemuning</h4>
                            <p style="margin-top: 10px; color: #aaa;">Hamparan kebun teh dengan udara sejuk dan spot foto menawan. Jarak tempuh: 40 Menit.</p>
                        </div>
                        <div style="background: var(--surface-1); padding: 30px; border-radius: 25px;">
                            <h4 style="color: var(--gold-primary); font-size: 1.5rem;">Candi Cetho & Sukuh</h4>
                            <p style="margin-top: 10px; color: #aaa;">Candi bersejarah dengan arsitektur unik di ketinggian Lawu. Jarak tempuh: 50 Menit.</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="control-panel">
    <div class="control-btn btn-up" onclick="simulateKey('ArrowUp')">‚ñ≤</div>
    <div class="control-btn btn-left" onclick="simulateKey('ArrowLeft')">‚óÄ</div>
    <div class="control-btn btn-ok" onclick="simulateKey('Enter')">OK</div>
    <div class="control-btn btn-right" onclick="simulateKey('ArrowRight')">‚ñ∂</div>
    <div class="control-btn btn-down" onclick="simulateKey('ArrowDown')">‚ñº</div>
    <div class="control-btn btn-fs" onclick="toggleFullScreen()">FULLSCREEN (ON/OFF)</div>
            </div>
        </section>
    </main>

    <script>
        const PRAYER_DB = [
            { id: 'subuh', label: 'SUBUH', time: '04:12' },
            { id: 'dzuhur', label: 'DZUHUR', time: '11:45' },
            { id: 'ashar', label: 'ASHAR', time: '15:10' },
            { id: 'maghrib', label: 'MAGHRIB', time: '17:58' },
            { id: 'isya', label: 'ISYA', time: '19:12' }
        ];

        let audioActivated = false;

        // 1. CLOCK & ALARM ENGINE
        function initSystemTime() {
            const clockEl = document.getElementById('clock-main');
            const dateEl = document.getElementById('date-main');
            
            setInterval(() => {
                const now = new Date();
                const h = String(now.getHours()).padStart(2, '0');
                const m = String(now.getMinutes()).padStart(2, '0');
                const s = String(now.getSeconds()).padStart(2, '0');
                
                clockEl.innerText = `${h}:${m}:${s}`;
                dateEl.innerText = now.toLocaleDateString('id-ID', { weekday: 'long', day: 'numeric', month: 'long', year: 'numeric' });

                // Check Alarm Every 00 Second
                if(s === "00") {
                    PRAYER_DB.forEach(p => {
                        if(p.time === `${h}:${m}`) launchAdzan(p.label);
                    });
                }
            }, 1000);
        }

        function launchAdzan(label) {
            document.getElementById('prayer-target').innerText = label;
            document.getElementById('adzan-layer').style.display = 'flex';
            if(audioActivated) {
                const audio = document.getElementById('sfx-alarm');
                audio.currentTime = 0;
                audio.play();
            }
        }

        function dismissAdzan() {
            document.getElementById('adzan-layer').style.display = 'none';
        }

        function enableAudioEngine() {
            if(!audioActivated) {
                document.getElementById('sfx-alarm').load();
                audioActivated = true;
            }
        }

        // 2. NAVIGATION ENGINE
        function navigateTo(id) {
            document.querySelectorAll('.section-view').forEach(s => s.classList.remove('active'));
            document.getElementById(`sec-${id}`).classList.add('active');
            
            document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
            // Styling is handled by CSS :focus for TV remote experience
        }

        // 3. RENDER ENGINE
        function renderPrayers() {
            const container = document.getElementById('prayer-render-engine');
            container.innerHTML = PRAYER_DB.map(p => `
                <div class="prayer-card" id="card-${p.id}">
                    <div class="prayer-name">${p.label}</div>
                    <div class="prayer-time">${p.time}</div>
                </div>
            `).join('');
        }

        // 4. IMAGE SLIDER ENGINE
        let activeSlide = 0;
        function startSlider() {
            const slides = document.querySelectorAll('.slide-item');
            setInterval(() => {
                slides[activeSlide].classList.remove('active');
                activeSlide = (activeSlide + 1) % slides.length;
                slides[activeSlide].classList.add('active');
            }, 7000);
        }

        // 5. PARTICLE BACKGROUND (CANVAS)
        function startParticles() {
            const canvas = document.getElementById('particle-canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            let particles = [];
            for(let i=0; i<120; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    size: Math.random() * 2 + 1,
                    speed: Math.random() * 0.5 + 0.1,
                    opacity: Math.random()
                });
            }

            function draw() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.fillStyle = "rgba(212, 175, 55, 0.3)";
                particles.forEach(p => {
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                    ctx.fill();
                    p.y += p.speed;
                    if(p.y > canvas.height) p.y = -10;
                });
                requestAnimationFrame(draw);
            }
            draw();
        }

        // 6. REMOTE CONTROL KEYBOARD LISTENER
        document.addEventListener('keydown', (e) => {
            const navItems = Array.from(document.querySelectorAll('.nav-link'));
            let currentFocused = navItems.indexOf(document.activeElement);

            if(e.key === 'ArrowDown') {
                e.preventDefault();
                currentFocused = (currentFocused + 1) % navItems.length;
                navItems[currentFocused].focus();
            } else if(e.key === 'ArrowUp') {
                e.preventDefault();
                currentFocused = (currentFocused - 1 + navItems.length) % navItems.length;
                navItems[currentFocused].focus();
            }
        });

// Fungsi Simulasi Navigasi (Untuk D-Pad Virtual)
function simulateKey(keyName) {
    const event = new KeyboardEvent('keydown', {
        key: keyName,
        code: keyName,
        keyCode: (keyName === 'ArrowUp' ? 38 : keyName === 'ArrowDown' ? 40 : keyName === 'ArrowLeft' ? 37 : keyName === 'ArrowRight' ? 39 : 13),
        which: (keyName === 'ArrowUp' ? 38 : keyName === 'ArrowDown' ? 40 : keyName === 'ArrowLeft' ? 37 : keyName === 'ArrowRight' ? 39 : 13),
        bubbles: true
    });
    document.dispatchEvent(event);

    // Jika menekan OK/Enter pada elemen yang sedang aktif (Focused)
    if(keyName === 'Enter') {
        document.activeElement.click();
    }
}

// Fungsi Layar Penuh (Toggle Fullscreen)
function toggleFullScreen() {
    if (!document.fullscreenElement) {
        document.documentElement.requestFullscreen().catch(err => {
            alert(`Error attempting to enable full-screen mode: ${err.message}`);
        });
    } else {
        if (document.exitFullscreen) {
            document.exitFullscreen();
        }
    }
}

// Tambahan: Supaya panah kanan-kiri bisa berpindah antar menu/elemen
document.addEventListener('keydown', (e) => {
    const focusable = Array.from(document.querySelectorAll('.nav-link, .food-item, button, [tabindex="0"]'));
    let index = focusable.indexOf(document.activeElement);

    if (e.key === 'ArrowRight' || e.key === 'ArrowDown') {
        index = (index + 1) % focusable.length;
        focusable[index].focus();
    } else if (e.key === 'ArrowLeft' || e.key === 'ArrowUp') {
        index = (index - 1 + focusable.length) % focusable.length;
        focusable[index].focus();
    }
});
        
        
        // INIT ALL
        window.onload = () => {
            initSystemTime();
            renderPrayers();
            startSlider();
            startParticles();
            // Force focus to first menu for TV remote
            setTimeout(() => {
                document.querySelector('.nav-link').focus();
            }, 100);
        };
    </script>
</body>
</html>
